#include <bits/stdc++.h>
using namespace std;

class CountriesRanklist
{
public:
	vector <string> findPlaces(vector <string> knownPoints);
};

class Score {
public:
	int total, cnt, mx;
	int mxScore, mnScore;
	Score() {
		total = cnt = 0, mx = 1e9;
	}
	void add(int x) {
		total += x;
		cnt++;
		mx = min(mx, x);
		mxScore = total + (4-cnt)*(mx-1);
		mnScore = total ;
	}
	bool operator <(const Score &ob) const {
		return total < ob.total;
	}
	void print() {
		printf("total = %-3d, mx = %-3d, cnt = %-3d, mxScore = %-3d, mnScore = %-3d", total, mx, cnt, mxScore, mnScore);
	}
};

vector <string> CountriesRanklist::findPlaces (vector <string> knownPoints) 
{
	vector <string> ret;
	map <string, Score > scores;
	for(auto it = (knownPoints).begin(); it != (knownPoints).end(); ++it) {
		stringstream ss(*it);
		string country, name;
		int pt;
		ss >> country >> name >> pt;
		scores[country].add(pt);
	}
	for(auto it = (scores).begin(); it != (scores).end(); ++it) {
		printf("%-10s: ", it->first.c_str());
		it->second.print();
		cout << "\n";
	}
	cout << "\n";
	for(auto it = (scores).begin(); it != (scores).end(); ++it) {
		int best = 1, worst = 1;
		for(auto jt = (scores).begin(); jt != (scores).end(); ++jt) {
			if(it != jt) {
				if(it->second.mxScore < jt->second.mnScore)
					best++;
				if(it->second.mnScore < jt->second.mxScore)
					worst++;
			}
		}
		cout << it->first << ": " << best << ", " << worst << "\n";
	}
	

	return ret;
}

// BEGIN KAWIGIEDIT TESTING
// Generated by KawigiEdit 2.1.8 (beta) modified by pivanof
#include <iostream>
#include <string>
#include <vector>
using namespace std;
bool KawigiEdit_RunTest(int testNum, vector <string> p0, bool hasAnswer, vector <string> p1) {
	cout << "Test " << testNum << ": [" << "{";
	for (int i = 0; int(p0.size()) > i; ++i) {
		if (i > 0) {
			cout << ",";
		}
		cout << "\"" << p0[i] << "\"";
	}
	cout << "}";
	cout << "]" << endl;
	CountriesRanklist *obj;
	vector <string> answer;
	obj = new CountriesRanklist();
	clock_t startTime = clock();
	answer = obj->findPlaces(p0);
	clock_t endTime = clock();
	delete obj;
	bool res;
	res = true;
	cout << "Time: " << double(endTime - startTime) / CLOCKS_PER_SEC << " seconds" << endl;
	if (hasAnswer) {
		cout << "Desired answer:" << endl;
		cout << "\t" << "{";
		for (int i = 0; int(p1.size()) > i; ++i) {
			if (i > 0) {
				cout << ",";
			}
			cout << "\"" << p1[i] << "\"";
		}
		cout << "}" << endl;
	}
	cout << "Your answer:" << endl;
	cout << "\t" << "{";
	for (int i = 0; int(answer.size()) > i; ++i) {
		if (i > 0) {
			cout << ",";
		}
		cout << "\"" << answer[i] << "\"";
	}
	cout << "}" << endl;
	if (hasAnswer) {
		if (answer.size() != p1.size()) {
			res = false;
		} else {
			for (int i = 0; int(answer.size()) > i; ++i) {
				if (answer[i] != p1[i]) {
					res = false;
				}
			}
		}
	}
	if (!res) {
		cout << "DOESN'T MATCH!!!!" << endl;
	} else if (double(endTime - startTime) / CLOCKS_PER_SEC >= 2) {
		cout << "FAIL the timeout" << endl;
		res = false;
	} else if (hasAnswer) {
		cout << "Match :-)" << endl;
	} else {
		cout << "OK, but is it right?" << endl;
	}
	cout << "" << endl;
	return res;
}
int main() {
	bool all_right;
	all_right = true;
	
	vector <string> p0;
	vector <string> p1;
	
	{
	// ----- test 0 -----
	string t0[] = {"Poland Krzysztof 101","Ukraine Evgeni 30","Ukraine Ivan 24"};
			p0.assign(t0, t0 + sizeof(t0) / sizeof(t0[0]));
	string t1[] = {"Poland 1 1","Ukraine 2 2"};
			p1.assign(t1, t1 + sizeof(t1) / sizeof(t1[0]));
	all_right = KawigiEdit_RunTest(0, p0, true, p1) && all_right;
	// ------------------
	}
	
	{
	// ----- test 1 -----
	string t0[] = {"Poland Krzysztof 100","CzechRep Martin 30","CzechRep Jirka 25"};
			p0.assign(t0, t0 + sizeof(t0) / sizeof(t0[0]));
	string t1[] = {"CzechRep 1 2","Poland 1 2"};
			p1.assign(t1, t1 + sizeof(t1) / sizeof(t1[0]));
	all_right = KawigiEdit_RunTest(1, p0, true, p1) && all_right;
	// ------------------
	}
	
	{
	// ----- test 2 -----
	string t0[] = {"Slovakia Marian 270","Hungary Istvan 24","Poland Krzysztof 100","Hungary Gyula 30","Germany Tobias 27","Germany Juergen 27"};
			p0.assign(t0, t0 + sizeof(t0) / sizeof(t0[0]));
	string t1[] = {"Germany 2 4","Hungary 2 4","Poland 2 2","Slovakia 1 1"};
			p1.assign(t1, t1 + sizeof(t1) / sizeof(t1[0]));
	all_right = KawigiEdit_RunTest(2, p0, true, p1) && all_right;
	// ------------------
	}
	
	{
	// ----- test 3 -----
	string t0[] = {"usa Jack 14","USA Jim 10","USA Jim 10","USA Jim 10","USA Jim 10","usa Jack 14","usa Jack 14","Zimbabwe Jack 10"};
			p0.assign(t0, t0 + sizeof(t0) / sizeof(t0[0]));
	string t1[] = {"USA 2 2","Zimbabwe 3 3","usa 1 1"};
			p1.assign(t1, t1 + sizeof(t1) / sizeof(t1[0]));
	all_right = KawigiEdit_RunTest(3, p0, true, p1) && all_right;
	// ------------------
	}
	
	{
	// ----- test 4 -----
	string t0[] = {"A a 9","A b 9","A c 9","A d 9","B e 9","B f 9","B g 8","B h 8","C i 9","C j 9","C k 9","C l 7","D m 1","D n 1","D o 1","D p 1"};
			p0.assign(t0, t0 + sizeof(t0) / sizeof(t0[0]));
	string t1[] = {"A 1 1","B 2 2","C 2 2","D 4 4"};
			p1.assign(t1, t1 + sizeof(t1) / sizeof(t1[0]));
	all_right = KawigiEdit_RunTest(4, p0, true, p1) && all_right;
	// ------------------
	}
	
	if (all_right) {
		cout << "You're a stud (at least on the example cases)!" << endl;
	} else {
		cout << "Some of the test cases had errors." << endl;
	}
	return 0;
}
// PROBLEM STATEMENT
// 
// An unnamed international contest just finished. There were exactly four contestants from each of the participating countries.
// During the contest each of the contestants achieved a non-negative integer score (the higher, the better).
// The contestants were sorted according to their scores and the first part of the overall results (i.e., the best few contestants)
// was announced during the final ceremony.
// The organizers of the contest decided not to publish the remaining, lower part of the results.
// 
// 
// 
// In the Countries Ranklist the countries are ordered (in decreasing order) by the total score of their four contestants. 
// If two or more countries have the same score, they are tied for the best place from the corresponding interval,
// and the places of the lower ranked countries remain unaffected. For example, if the total scores of countries A, B, C and D
// are 100, 90, 90 and 80, respectively, then B and C are tied for second place, and D is fourth. For further 
// clarification, see examples 2 and 4.
// 
// 
// 
// A vector <string> knownResults will represent the published part of the results, with each of the elements describing one of the announced contestants.
// The elements have the form "COUNTRY CONTESTANT SCORE", 
// where COUNTRY is the name of the country, CONTESTANT is the name of the contestant 
// and SCORE is his score. 
// 
// 
// 
// Your task will be to compute the best and the worst possible placement in the Countries Ranklist
// for each of the participating countries.
// You shall assume that from each country at least one contestant was announced and that 
// all contestants not in the available part of the results scored strictly less 
// than the worst contestant in the available part of rankings. (For example, if the worst announced
// contestant scored 47 points, then each of the not announced contestants from each of the participating
// countries could have scored at most 46 points.)
// 
// 
// 
// You are to return a vector <string> with one element for each country. 
// The form of each element must be "COUNTRY BEST WORST", where COUNTRY is the name of the country, 
// BEST and WORST are the best and the worst position this country could possibly have in the Countries Ranklist.
// Order this list so that the country names are given in alphabetical order. Note that country names are case sensitive, and that in alphabetical order all uppercase letters come before lowercase letters. The numbers BEST and WORST mustn't contain leading zeroes.
// 
// 
// DEFINITION
// Class:CountriesRanklist
// Method:findPlaces
// Parameters:vector <string>
// Returns:vector <string>
// Method signature:vector <string> findPlaces(vector <string> knownPoints)
// 
// 
// NOTES
// -All scores (even the unknown ones) are non-negative integers.
// 
// 
// CONSTRAINTS
// -knownResults contains between 1 and 50 elements, inclusive.
// -Each of the elements in knownResults is of the form "COUNTRY CONTESTANT SCORE".
// -Each COUNTRY and CONTESTANT in knownResults are strings containing between 1 and 10 letters ('a'-'z', 'A'-'Z').
// -For each country knownResults contains at most 4 contestants.
// -Each SCORE in knownResults is an integer between 1 and 600, inclusive, with no leading zeroes.
// 
// 
// EXAMPLES
// 
// 0)
// {"Poland Krzysztof 101", "Ukraine Evgeni 30", "Ukraine Ivan 24"}
// 
// Returns: {"Poland 1 1", "Ukraine 2 2" }
// 
// The worst announced contestant is Ivan with 24 points. Each of the contestants that weren't announced had to score strictly less, i.e., at most 23 points. Thus the total score of Ukraine is at most 30+24+23+23 = 100 and Poland surely wins.
// 
// 1)
// {"Poland Krzysztof 100", "CzechRep Martin 30", "CzechRep Jirka 25"}
// 
// Returns: {"CzechRep 1 2", "Poland 1 2" }
// 
// This time, if the two missing Czech competitors scored 24 points each (and the remaining three from Poland scored 0), Czech Republic could still win. Note the order in which the countries are reported in the output.
// 
// 2)
// {"Slovakia Marian 270", "Hungary Istvan 24", "Poland Krzysztof 100", 
//  "Hungary Gyula 30", "Germany Tobias 27", "Germany Juergen 27"}
// 
// Returns: {"Germany 2 4", "Hungary 2 4", "Poland 2 2", "Slovakia 1 1" }
// 
// This is an interesting case. Slovakia is sure to win, and Poland is sure to be second. But it is possible that Germany, Hungary and Poland have an equal total score of 100. In this case they are all tied for second place.
// 
// 3)
// {"usa Jack 14", "USA Jim 10", "USA Jim 10", "USA Jim 10", 
//  "USA Jim 10", "usa Jack 14", "usa Jack 14", "Zimbabwe Jack 10"}
// 
// Returns: {"USA 2 2", "Zimbabwe 3 3", "usa 1 1" }
// 
// Case matters, "USA" and "usa" are two different countries. Contestant names don't matter, i.e., from "USA" there are four different contestants, all named "Jim". 
// 
// 4)
// {"A a 9", "A b 9", "A c 9", "A d 9", 
//  "B e 9", "B f 9", "B g 8", "B h 8",
//  "C i 9", "C j 9", "C k 9", "C l 7",
//  "D m 1", "D n 1", "D o 1", "D p 1"}
// 
// Returns: {"A 1 1", "B 2 2", "C 2 2", "D 4 4" }
// 
// All results have been announced, so everything is clear. A is first, B and C are tied for second, and D is fourth.
// 
// END KAWIGIEDIT TESTING



//Powered by KawigiEdit 2.1.8 (beta) modified by pivanof!
